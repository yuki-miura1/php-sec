# PHP App ② レビュー

## XSS(クロスサイトスクリプティング)

### XSSとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
脆弱性のある動的webサイトに悪意のあるスクリプトを埋め込み、webサイトに訪問したユーザーにそのスクリプトを実行させてしまう攻撃。
メリット：ユーザーのセッションIDやクッキーの情報を盗めたり偽サイトで個人情報を入力させて取得するなどできる。
### `htmlspecialchars()`を`e()`として定義しなおすメリットを説明してください。
高頻度で使用する関数を再定義し、可読性向上とコードの記述量を減らせます。
### `htmlspecialchars()`を使うことでなぜXSSが防げるのか説明してください。
スクリプトで使われる特殊文字が関係ない文字に変換され、ただの文字列として認識し実行されなくなるため。
## CSRF(クロスサイトリクエストフォージェリ)

### CSRFとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
ログイン状態にある不特定多数のユーザーに意図しないリクエストを送信させる攻撃。
メリット：攻撃者が仕掛けた不正操作のリクエストでネットバンキングのおける不正送金などができる。
### SessionとCookieの違いを説明してください。
Sessionはサーバ側が保存、cookieはユーザーのブラウザ側で保存する。
### `setToken()`が何をしているか説明してください。
16バイトの擬似乱数を生成し16進数の文字列に変換してます。その文字列は$_SESSIONにtokenというキーで保存されてます。
### `checkToken()`が何をしているか説明してください。
引数のトークンがif文でtrueの結果になったらエラーメッセージとリダイレクトが実行される。
if文ではトークンが空の状態またはデータ型もしくは値が一致しない場合にtrueを返します。
### トークンを使うことでなぜCSRFが防げるのか説明してください。
トークンと一緒にリクエストを送信することでサーバ側が正しいリクエストか照合している。CSRF攻撃のリクエストもトークンが一致していないことか空の場合なら不正なリクエストをみなされるので防げている。
## SQLインジェクション

### SQLインジェクションとはどんな攻撃か、また攻撃者にどんなメリットがあるか説明してください。
データベースに対し入力フォームから不正な操作を行うSQLを送る攻撃。
メリット：保存されてる個人情報閲覧やデータベースの改ざんなど
### `->prepare()`の返り値と、またこのメソッドが何をしているか説明してください。
返り値はPDOオブジェクトです。
このメソッドは実行するクエリ文を文字列として定義してます。インジェクション対策としてユーザーが入力した値はプレースホルダーが使われてます。
### `->bindValue()`が何をしているか説明してください。
sql文の:todoTextに対しユーザーが入力した$todoTextを文字列としてバインドしてます。
### 今回の対策でなぜSQLインジェクションが防げるのか説明してください。
ユーザーが入力した値はprepareで使うプレースホルダーで特殊文字がエスケープ処理され、ただの文字列に変換されているため。
## バリデーション

### バリデーションの目的について説明してください。
入力や形式の制限やルールを設け、正確なデータの送信。
### `validate()`が何をしているか説明してください。
引数で受け取った配列の['content']キーが存在していてかつデータ型と値が空の場合にエラーメッセージとリダイレクトを実行。
### `isset($post['content'])`はなぜ必要か、無い場合どうなるか説明してください。
定義していないキーにアクセスしようとするとエラーが出てしまうため。
## その他

### `unsetError()`を実行しないとどうなるか説明してください。
エラーメッセージが画面に表示され続けてしまう。 